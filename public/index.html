<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator RPC</title>
  <style>
    body { font-family: Arial, sans-serif; }
    .container { max-width: 400px; margin: 50px auto; text-align: center; }
    input, button { margin: 5px; padding: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kalkulator RPC</h1>
    <input type="number" id="a" placeholder="Angka pertama">
    <input type="number" id="b" placeholder="Angka kedua">
    <select id="operation">
      <option value="add">Tambah</option>
      <option value="subtract">Kurang</option>
      <option value="multiply">Kali</option>
      <option value="divide">Bagi</option>
    </select>
    <button onclick="calculate()">Hitung</button>
    <p id="result"></p>
  </div>
  <script>
    async function calculate() {
  const a = parseFloat(document.getElementById('a').value);
  const b = parseFloat(document.getElementById('b').value);
  const operation = document.getElementById('operation').value;

  // Check if both a and b are numbers
  if (isNaN(a) || isNaN(b)) {
    document.getElementById('result').innerText = "Hasil: Invalid input";
    return;
  }

  const response = await fetch('/rpc', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      jsonrpc: '2.0',
      method: operation,
      params: { a, b },
      id: 1
    })
  });

  if (!response.ok) {
    const errorMessage = await response.text(); // Get error message from response
    document.getElementById('result').innerText = `Hasil: Error ${response.status}: ${errorMessage}`;
    return;
  }

  const result = await response.json();
  document.getElementById('result').innerText = `Hasil: ${result.result}`;
}
  </script>
</body>
</html>
